spring:
  application:
    name: dvmm

  # OAuth2 Resource Server Configuration
  security:
    oauth2:
      resourceserver:
        jwt:
          # Keycloak issuer URI - validates JWT iss claim
          issuer-uri: ${KEYCLOAK_ISSUER_URI:http://localhost:8180/realms/dvmm}
          # Keycloak JWKS endpoint - validates JWT signature
          jwk-set-uri: ${KEYCLOAK_JWK_SET_URI:http://localhost:8180/realms/dvmm/protocol/openid-connect/certs}

# EAF Auth Configuration
eaf:
  auth:
    keycloak:
      # OAuth2 client ID for role extraction from resource_access
      client-id: ${KEYCLOAK_CLIENT_ID:dvmm-web}
      # UserInfo endpoint (optional - for getUserInfo calls)
      user-info-uri: ${KEYCLOAK_USER_INFO_URI:http://localhost:8180/realms/dvmm/protocol/openid-connect/userinfo}

  # CORS Configuration
  cors:
    # Comma-separated list of allowed origins
    allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000}

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when_authorized

# Logging Configuration
logging:
  level:
    de.acci.dvmm: INFO
    de.acci.eaf: INFO
    org.springframework.security: WARN
